# Tours 페이지 리뉴얼 구현 계획 📋

## 📖 개요
기존 Tours.tsx를 planner.html의 레이아웃과 디자인으로 리뉴얼하되, MUI, Axios, Zustand 등 기존 기술 스택을 유지하여 구현

## 🎯 요구사항 분석

### 1. 레이아웃 구조 변경
```
기존: [60% 지도 | 40% 사이드바(여행정보+날씨+일정)]
변경: [70% 메인(지도+일정) | 30% 사이드바(여행정보+교통+날씨)]
```

### 2. 핵심 변경사항

#### 2-1. 여행 정보 섹션
- ✅ **유지**: 제목, 시작일, 종료일, 여행자 수, 예산 설정
- 🔄 **변경**: 날짜 변경 시 일정 탭 자동 연동

#### 2-2. 여행 일정 섹션 (핵심 변경)
- 🔄 **위치**: 지도 아래로 이동
- 🔄 **날짜 관리**: 시작일~종료일 범위 내에서만 추가 가능
- 🔄 **시간 표시**: 24시간 단일 시간 (기존: 시작~종료)
- 🆕 **드래그앤드롭**: 일정 순서 변경 (시간 기반 정렬 제거)
- 🆕 **일정 클릭**: 지도에서 해당 위치 표시

#### 2-3. 길찾기 기능
- 🆕 **출발지↔도착지 교체** 기능
- 🆕 **지도 검색 결과**에 길찾기 버튼 추가
- 🆕 **시간대별 대중교통** 검색
- ✅ **기존 길찾기 버튼** 유지

#### 2-4. 교통 섹션 (신규)
- 🆕 **위치**: 여행 정보 아래
- 🆕 **기능**: 길찾기 결과를 localStorage에 저장 후 표시
- 🆕 **일정 추가**: 각 교통편을 일정에 추가 가능

## 🔍 모순/모호한 부분 검토

### ✅ 명확해진 요구사항
1. **일정 시간 표시**: 시작시간만 표시 (24시간 형식)
2. **교통편 일정 추가**: 교통편도 장소처럼 일정에 추가 가능 (아이콘으로 구분)
3. **드래그앤드롭**: 시간 무관하게 원하는 순서로 배치, 저장 시 순서대로 저장

4. **날짜 추가**: "+ 일정 추가" 버튼으로 다음 날짜 탭 생성 (시작일 → 시작일+1 → ... → 종료일)

## 🚀 구현 순서 (권장)

### Phase 1: 기본 레이아웃 구성 (1-2일)
1. **레이아웃 리팩토링**
   - Grid 구조 변경 (70% + 30%)
   - 사이드바 컴포넌트 순서 조정
   - 일정 섹션을 지도 아래로 이동

2. **여행 정보 컴포넌트 개선**
   - 날짜 변경 시 일정 탭 연동 로직
   - 기존 TravelInfo 컴포넌트 확장

### Phase 2: 일정 관리 시스템 개편 (2-3일)
3. **날짜 기반 탭 시스템**
   - 시작일~종료일 범위 내 탭 생성
   - 현재 선택된 날짜 상태 관리
   - 날짜 추가/제거 기능

4. **일정 아이템 개편**
   - 단일 시간 표시 (24시간)
   - 드래그앤드롭 정렬 (react-beautiful-dnd)
   - 일정 클릭 시 지도 연동

5. **일정 CRUD 재구성**
   - 현재 날짜 기준 일정 추가
   - 시간 기반 정렬 로직 제거
   - 순서 기반 정렬 적용

### Phase 3: 지도 연동 강화 (2일)
6. **지도 검색 결과 개선**
   - 장소 추가 버튼 유지
   - 길찾기 버튼 추가
   - 검색 결과 UI 개선

7. **일정-지도 연동**
   - 일정 클릭 시 지도 마커 표시
   - 지도 중심 이동 기능

### Phase 4: 길찾기 시스템 확장 (2-3일)
8. **길찾기 기능 강화**
   - 출발지↔도착지 교체 UI
   - 시간대별 검색 옵션
   - 기존 길찾기 버튼 기능 유지

9. **교통 정보 섹션 신규 개발**
   - localStorage 기반 교통편 저장
   - 교통편 목록 표시 컴포넌트
   - 일정 추가 버튼 구현

### Phase 5: 데이터 연동 및 최적화 (1-2일)
10. **Zustand 스토어 업데이트**
    - 새로운 일정 구조에 맞는 상태 관리
    - 교통편 상태 추가
    - 백엔드 연동 로직 조정

11. **백엔드 데이터 형식 조정**
    - 새로운 일정 구조 지원
    - 교통편 데이터 저장 구조

### Phase 6: UI/UX 폴리싱 (1일)
12. **MUI 컴포넌트 스타일링**
    - planner.html 디자인 적용
    - 반응형 레이아웃
    - 애니메이션 및 트랜지션

## 🛠 기술 스택 활용

### 유지되는 기술
- **MUI**: 컴포넌트 및 스타일링
- **Zustand**: 상태 관리
- **Axios**: API 통신
- **React Router**: 라우팅

### 추가 필요 라이브러리
- **react-beautiful-dnd**: 드래그앤드롭
- **date-fns**: 날짜 계산 유틸리티

## 📁 파일 구조 예상

```
src/pages/Tours/
├── Tours.tsx (메인 컴포넌트)
├── components/
│   ├── TourLayout.tsx (레이아웃)
│   ├── MapSection.tsx (지도 영역)
│   ├── ScheduleSection/
│   │   ├── index.tsx
│   │   ├── DateTabs.tsx
│   │   ├── ScheduleList.tsx
│   │   └── ScheduleItem.tsx
│   ├── Sidebar/
│   │   ├── index.tsx
│   │   ├── TourInfo.tsx
│   │   ├── TransportInfo.tsx
│   │   └── WeatherInfo.tsx
│   └── RouteSearch/
│       ├── RoutePanel.tsx
│       └── RouteResult.tsx
```

## ⚡ 우선순위

### 🔥 High Priority
1. 레이아웃 리팩토링
2. 일정 관리 시스템 개편
3. 날짜 기반 탭 시스템

### 🟡 Medium Priority
4. 드래그앤드롭 정렬
5. 지도 연동 강화
6. 길찾기 기능 확장

### 🟢 Low Priority
7. 교통 정보 섹션
8. UI/UX 폴리싱

## 🎯 1주차 목표
Phase 1-3 완료로 기본적인 새로운 Tours 페이지 구조 완성

---

**다음 단계**: Phase 1부터 시작하여 단계별 구현 진행
**예상 총 소요시간**: 7-10일